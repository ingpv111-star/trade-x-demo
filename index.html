<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Trade X Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f172a;
  color:white;
  text-align:center;
}
header{
  padding:15px;
  background:#020617;
  font-size:22px;
  font-weight:bold;
}
.box{
  padding:12px;
  background:#111827;
  margin:10px;
  border-radius:10px;
}
button{
  padding:10px 14px;
  margin:5px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
.buy{background:green;color:white;}
.sell{background:red;color:white;}
.premium{background:purple;color:white;}
input{
  width:90%;
  padding:10px;
  margin:6px;
  border-radius:8px;
  border:none;
}
.history{
  max-height:150px;
  overflow:auto;
  font-size:12px;
}
</style>
</head>

<body>

<header>ðŸ“Š TRADE X PRO</header>

<div class="box">
Plan: <span id="planType">FREE</span><br>
<span id="balance">Balance: â‚¹10000</span>
</div>

<div class="box">
<div id="chart" style="height:300px;width:100%;"></div>
<div id="price"></div>
</div>

<div class="box">
<button class="premium" onclick="upgrade(399)">ðŸ‘‘ â‚¹399</button>
<button class="premium" onclick="upgrade(999)">ðŸš€ â‚¹999</button>
<button onclick="resetBalance()">Reset</button>
</div>

<div class="box">
<input type="number" id="sl" placeholder="Stop Loss">
<input type="number" id="target" placeholder="Target">
<br>
<button class="buy" onclick="openTrade('BUY')">BUY</button>
<button class="sell" onclick="openTrade('SELL')">SELL</button>
</div>

<div class="box history" id="history"></div>

<script>

let plan="FREE";
let balance=10000;
let currentTrade=null;

const balanceEl=document.getElementById("balance");
const planEl=document.getElementById("planType");
const historyEl=document.getElementById("history");
const priceEl=document.getElementById("price");

function updateUI(){
  balanceEl.innerText="Balance: â‚¹"+balance.toFixed(2);
  planEl.innerText=plan;
}

const chart = LightweightCharts.createChart(
  document.getElementById("chart"),
  {
    layout:{background:{color:"#0f172a"},textColor:"#ffffff"},
    grid:{
      vertLines:{color:"#1e293b"},
      horzLines:{color:"#1e293b"}
    },
    width: document.getElementById("chart").clientWidth,
    height:300
  }
);

window.addEventListener("resize",()=>{
  chart.applyOptions({
    width: document.getElementById("chart").clientWidth
  });
});

const candleSeries = chart.addCandlestickSeries();

let candleData=[];
let lastPrice=18000;
let lastTime=Math.floor(Date.now()/1000);

function generateCandle(){
  let open=lastPrice;
  let close=open+(Math.random()-0.5)*40;
  let high=Math.max(open,close)+Math.random()*20;
  let low=Math.min(open,close)-Math.random()*20;

  lastPrice=close;
  lastTime+=60;

  const candle={
    time:lastTime,
    open:open,
    high:high,
    low:low,
    close:close
  };

  candleData.push(candle);
  if(candleData.length>50) candleData.shift();

  candleSeries.setData(candleData);

  priceEl.innerText="Live Price: â‚¹"+close.toFixed(2);

  checkTrade(close);
}

setInterval(generateCandle,2000);

function openTrade(type){
  let sl=parseFloat(document.getElementById("sl").value);
  let target=parseFloat(document.getElementById("target").value);

  if(!sl || !target){
    alert("Enter SL & Target");
    return;
  }

  currentTrade={
    type:type,
    entry:lastPrice,
    sl:sl,
    target:target
  };

  alert("Trade Opened @ "+lastPrice.toFixed(2));
}

function checkTrade(price){
  if(!currentTrade) return;

  let trade=currentTrade;
  let pl=0;

  if(trade.type==="BUY"){
    pl=price-trade.entry;
    if(price<=trade.sl || price>=trade.target){
      balance+=pl;
      closeTrade(price,pl);
    }
  }

  if(trade.type==="SELL"){
    pl=trade.entry-price;
    if(price>=trade.sl || price<=trade.target){
      balance+=pl;
      closeTrade(price,pl);
    }
  }
}

function closeTrade(price,pl){
  let div=document.createElement("div");
  div.innerText=
    currentTrade.type+
    " | Entry:"+currentTrade.entry.toFixed(2)+
    " | Exit:"+price.toFixed(2)+
    " | P/L: â‚¹"+pl.toFixed(2);

  historyEl.prepend(div);
  currentTrade=null;
  updateUI();
}

function upgrade(type){
  plan=type;

  if(type===399) balance=1000000;
  if(type===999) balance=10000000;

  updateUI();
  alert("Upgraded to â‚¹"+type);
}

function resetBalance(){
  if(plan==="FREE"){
    alert("Premium Only");
    return;
  }

  if(plan===399) balance=1000000;
  if(plan===999) balance=10000000;

  updateUI();
}

updateUI();

</script>

</body>
</html>
